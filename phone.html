<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phone Mockup — Guess the PIN</title>
  <style>
    :root{--bg:#0b0b0f;--phone:#0f1720;--screen:#0b1220;--accent:#1fb6ff;--muted:#97a0b3}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#06060a 0%, #0e1220 100%);color:#e6eef8}

    /* phone */
    .phone{width:360px;height:720px;border-radius:36px;background:linear-gradient(180deg,#0b1220,#06101a);box-shadow:0 20px 60px rgba(2,6,23,.7), inset 0 1px 0 rgba(255,255,255,.03);padding:18px;display:flex;flex-direction:column}
    .notch{height:32px;display:flex;align-items:center;justify-content:center}
    .screen{flex:1;background:var(--screen);border-radius:22px;padding:18px;overflow:hidden;position:relative}

    /* lock screen */
    .lock-center{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px}
    .time{font-size:48px;font-weight:600}
    .date{color:var(--muted)}
    .pin-dots{display:flex;gap:12px}
    .dot{width:12px;height:12px;border-radius:50%;background:transparent;border:2px solid rgba(255,255,255,.18)}
    .dot.filled{background:var(--accent);border-color:transparent}

    /* keypad */
    .keypad{position:absolute;left:0;right:0;bottom:0;padding:18px;background:linear-gradient(180deg,transparent,rgba(0,0,0,.3));display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .key{background:rgba(255,255,255,.04);padding:14px;border-radius:12px;text-align:center;font-size:18px;user-select:none;cursor:pointer;box-shadow:inset 0 -2px 0 rgba(0,0,0,.25)}
    .key:active{transform:translateY(1px)}
    .key.small{grid-column:span:3}

    /* home */
    .home{display:none;height:100%;width:100%;flex-direction:column}
    .app-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;padding:18px}
    .app{display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer}
    .app .icon{width:64px;height:64px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));display:flex;align-items:center;justify-content:center;font-size:28px}
    .label{font-size:12px;color:var(--muted);text-align:center}

    /* gallery */
    .overlay{position:absolute;inset:0;background:rgba(2,6,23,.75);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;padding:18px}
    .panel{width:100%;height:100%;background:linear-gradient(180deg,#08101a,#04101a);border-radius:16px;padding:14px;overflow:auto;position:relative}
    .panel .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .thumb{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:8px;cursor:pointer}
    .thumb:hover {box-shadow: 0 0 0 2px var(--accent);} /* Visual feedback for hover/hold */

    /* CCTV panel */
    .cctv-screen{display:flex;align-items:center;justify-content:center;height:100%;font-size:14px;color:var(--muted)}

    /* fake hacker screen styles */
    #hackerScreen{
      position:absolute;
      inset:0;
      background:var(--screen);
      display:flex;
      flex-direction:column;
      padding:18px;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px;
      color: #c0f0c0; /* Light Green */
      overflow: hidden;
      z-index: 10;
    }
    #hackerOutput{
      white-space: pre-wrap;
      overflow: hidden;
    }
    .glitch{
      position: absolute;
      color: red;
      opacity: 0.1;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 72px;
      pointer-events: none;
    }

    /* Share Menu styles */
    .share-menu {
        position: absolute;
        top: 0;
        right: 0;
        background: #1e293b; /* Darker background for the menu */
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        padding: 8px;
        min-width: 150px;
        z-index: 20;
        display: none;
    }
    .share-menu div {
        padding: 8px 12px;
        cursor: pointer;
        border-radius: 4px;
    }
    .share-menu div:hover {
        background: #334155;
    }

    /* small helpers */
    .btn{text-transform:uppercase;font-size:12px;padding:8px 10px;border-radius:10px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.03);cursor:pointer}

    /* responsive */
    @media (max-width:420px){.phone{transform:scale(.9)}}
  </style>
</head>
<body>
  <div class="phone" role="application" aria-label="Phone mockup">
    <div class="notch"></div>
    <div class="screen">

            <div id="hackerScreen">
        <div id="hackerOutput"></div>
        <div class="glitch" id="glitchEffect"></div>
      </div>

            <div class="lock-screen lock-center" id="lockScreen" style="display:none">
        <div style="text-align:center">
          <div class="time" id="time">09:41</div>
          <div class="date" id="date">Thursday, Sep 26</div>
        </div>
        <div style="text-align:center">
          <div style="margin-bottom:6px;color:var(--muted)">Enter PIN</div>
          <div class="pin-dots" id="dots">
            <div class="dot" data-index="0"></div>
            <div class="dot" data-index="1"></div>
            <div class="dot" data-index="2"></div>
            <div class="dot" data-index="3"></div>
          </div>
        </div>
      </div>

            <div class="home" id="homeScreen" aria-hidden="true">
        <div style="padding:14px 18px;color:var(--muted)">Home</div>
        <div class="app-grid">
          <div class="app" id="appCCTV" tabindex="0" role="button" aria-label="CCTV app">
            <div class="icon">📹</div>
            <div class="label">CCTV</div>
          </div>
          <div class="app" id="appGallery" tabindex="0" role="button" aria-label="Gallery app">
            <div class="icon">🖼️</div>
            <div class="label">Gallery</div>
          </div>
        </div>
      </div>

            <div class="keypad" id="keypad" style="display:none">
        <div class="key" data-key="1">1</div>
        <div class="key" data-key="2">2</div>
        <div class="key" data-key="3">3</div>
        <div class="key" data-key="4">4</div>
        <div class="key" data-key="5">5</div>
        <div class="key" data-key="6">6</div>
        <div class="key" data-key="7">7</div>
        <div class="key" data-key="8">8</div>
        <div class="key" data-key="9">9</div>
        <div class="key" data-key="*">*</div>
        <div class="key" data-key="0">0</div>
        <div class="key" id="keyBack">⌫</div>
      </div>

            <div class="overlay" id="galleryOverlay" aria-hidden="true">
        <div class="panel">
          <div class="top"><div style="font-weight:600">Gallery</div><div><button class="btn" id="closeGallery">Close</button></div></div>
          <div class="grid" id="galleryGrid">
                      </div>
            <div class="share-menu" id="shareMenu">
                <div>Share via Bluetooth</div>
                <div>Share via Email</div>
                <div id="shareNetworkOption">Send with Network</div>
            </div>
        </div>
      </div>

      <div class="overlay" id="cctvOverlay" aria-hidden="true">
        <div class="panel">
          <div class="top"><div style="font-weight:600">CCTV</div><div><button class="btn" id="closeCCTV">Close</button></div></div>
          <div class="cctv-screen">Live feed unavailable — placeholder camera view</div>
        </div>
      </div>

    </div>
  </div>

  <script>
    const CORRECT_PIN = '1966';
    const MAX_DIGITS = 4;
    const FAKE_HACK_DURATION = 5000; // 5 seconds for the hacker screen

    const dots = document.querySelectorAll('.dot');
    const keys = document.querySelectorAll('.key');
    const back = document.getElementById('keyBack');
    const keypad = document.getElementById('keypad');
    const lockScreen = document.getElementById('lockScreen');
    const homeScreen = document.getElementById('homeScreen');
    const appGallery = document.getElementById('appGallery');
    const appCCTV = document.getElementById('appCCTV');
    const galleryOverlay = document.getElementById('galleryOverlay');
    const closeGallery = document.getElementById('closeGallery');
    const cctvOverlay = document.getElementById('cctvOverlay');
    const closeCCTV = document.getElementById('closeCCTV');
    const galleryGrid = document.getElementById('galleryGrid');
    const hackerScreen = document.getElementById('hackerScreen');
    const hackerOutput = document.getElementById('hackerOutput');
    const shareMenu = document.getElementById('shareMenu');
    const shareNetworkOption = document.getElementById('shareNetworkOption');

    let entered = '';
    let typingInterval;
    let wordInterval;
    let wordToType = "SYSTEM";
    let wordIndex = 0;
    let longPressTimer;

    // --- Fake Hacker Screen Logic ---

    function getRandomChar() {
        const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const index = Math.floor(Math.random() * chars.length);
        return chars.charAt(index);
    }

    function typeRandomData() {
        let output = hackerOutput.innerHTML;
        const newChar = getRandomChar();
        output += newChar;
        // Keep only the last 30 lines (approx)
        const lines = output.split('\n');
        if (lines.length > 30) {
            output = lines.slice(lines.length - 30).join('\n');
        }
        hackerOutput.innerHTML = output;

        // Add a random newline sometimes to make it look like separate lines of output
        if (Math.random() < 0.1) {
             hackerOutput.innerHTML += '\n';
        }
        // Scroll to the bottom
        hackerOutput.scrollTop = hackerOutput.scrollHeight;
    }

    function typeWord() {
        if (wordIndex < wordToType.length) {
            // Add a small pause/delay for the next letter
            setTimeout(() => {
                hackerOutput.innerHTML += `<span style="color:red">${wordToType[wordIndex]}</span>`;
                wordIndex++;
            }, Math.random() * 200 + 50); // Small random delay between letters
        } else {
            clearInterval(wordInterval);
            hackerOutput.innerHTML += '... **[HACK SUCCESS]**';
            // Transition to the lock screen after the word is complete
            setTimeout(showLockScreen, 1000);
        }
    }

    function startHackerScreen() {
        typingInterval = setInterval(typeRandomData, 50); // Type every 50ms
        setTimeout(() => {
            clearInterval(typingInterval); // Stop random data after 4-5 seconds
            wordInterval = setInterval(typeWord, 300); // Start typing SYSTEM
        }, 4500); // 4.5 seconds before starting to type SYSTEM

        // Automatically hide and show lock screen after FAKE_HACK_DURATION
        setTimeout(() => {
            if (hackerScreen.style.display !== 'none') {
                showLockScreen();
            }
        }, FAKE_HACK_DURATION + 1500); // Total duration is ~6 seconds (4.5s random + 1s SYSTEM + 0.5s pause)
    }

    function showLockScreen() {
        hackerScreen.style.display = 'none';
        lockScreen.style.display = 'flex';
        keypad.style.display = 'grid'; // Keypad must be grid for CSS to work
    }

    // Initialize the hacker screen on load
    startHackerScreen();


    // --- PIN and Home Screen Logic (Original Logic Modified) ---

    keys.forEach(k=>{
      k.addEventListener('click', ()=> handleKey(k.dataset.key));
    });
    back.addEventListener('click', ()=>{
      entered = entered.slice(0,-1);
      refreshDots();
    });

    function handleKey(key){
      if(key === undefined) return;
      if(key === '*' ) return;
      if(key === '⌫') return;
      if(entered.length >= MAX_DIGITS) return;
      entered += key;
      refreshDots();
      if(entered.length === MAX_DIGITS) checkPin();
    }

    function refreshDots(){
      dots.forEach((d,i)=>{
        d.classList.toggle('filled', i < entered.length);
      });
    }

    function checkPin(){
      if(entered === CORRECT_PIN){
        unlock();
      } else {
        shake();
        entered = '';
        setTimeout(refreshDots, 250);
      }
    }

    function shake(){
      lockScreen.animate([
        { transform: 'translateX(0)' },
        { transform: 'translateX(-12px)' },
        { transform: 'translateX(12px)' },
        { transform: 'translateX(0)' }
      ],{ duration: 400, iterations: 1 });
    }

    function unlock(){
      lockScreen.style.display = 'none';
      keypad.style.display = 'none';
      homeScreen.style.display = 'flex';
      homeScreen.setAttribute('aria-hidden','false');
    }

    function tickTime(){
      const now = new Date();
      const hh = String(now.getHours()).padStart(2,'0');
      const mm = String(now.getMinutes()).padStart(2,'0');
      document.getElementById('time').textContent = hh + ':' + mm;
      const options = { weekday: 'long', month:'short', day:'numeric' };
      document.getElementById('date').textContent = now.toLocaleDateString(undefined, options);
    }
    tickTime(); setInterval(tickTime, 30*1000);

    // --- Gallery Logic (Original Logic Modified for Long Press) ---

    function showShareMenu(x, y, filename) {
        shareMenu.style.left = `${x}px`;
        shareMenu.style.top = `${y}px`;
        shareMenu.style.display = 'block';
        // Optional: show the filename in a title or log
        console.log(`Context menu for: ${filename}`);
        // Highlight the network option as requested
        shareNetworkOption.style.color = '#ff6b6b'; // Red color for "Network"
        shareNetworkOption.style.fontWeight = 'bold';
    }

    function hideShareMenu() {
        shareMenu.style.display = 'none';
        shareNetworkOption.style.color = ''; // Reset color
        shareNetworkOption.style.fontWeight = ''; // Reset font weight
    }

    function handleImageLongPress(e) {
        // Only trigger for image 1.jpg
        if (e.target.dataset.filename === '1.jpg') {
            // Position the menu relative to the click/touch point, but within the panel
            const panelRect = e.target.closest('.panel').getBoundingClientRect();
            const clickX = e.clientX - panelRect.left;
            const clickY = e.clientY - panelRect.top;
            showShareMenu(clickX, clickY, '1.jpg');
            e.preventDefault(); // Prevent default context menu
        }
    }


    function loadGallery(){
      galleryGrid.innerHTML = '';
      hideShareMenu(); // Hide menu when opening gallery
      for(let i=1;i<=6;i++){
        const img = document.createElement('img');
        img.src = `assets/${i}.jpg`;
        img.alt = `Photo ${i}`;
        img.dataset.filename = `${i}.jpg`; // Store filename for easy check
        img.className = 'thumb';

        // Add event listeners for "long press"
        // 1. Mouse down/Touch start
        img.addEventListener('mousedown', (e) => {
            if (e.button === 0 && img.dataset.filename === '1.jpg') {
                longPressTimer = setTimeout(() => handleImageLongPress(e), 500); // 500ms for long press
            }
        });
        img.addEventListener('touchstart', (e) => {
            if (img.dataset.filename === '1.jpg') {
                longPressTimer = setTimeout(() => handleImageLongPress(e.touches[0]), 500);
            }
        });

        // 2. Clear timer on mouse up/Touch end/Mouse move (to cancel the "hold")
        img.addEventListener('mouseup', () => clearTimeout(longPressTimer));
        img.addEventListener('mouseleave', () => clearTimeout(longPressTimer));
        img.addEventListener('touchend', () => clearTimeout(longPressTimer));
        img.addEventListener('touchmove', () => clearTimeout(longPressTimer));


        img.addEventListener('click', ()=> openImageFull(img.src)); // Standard click to view full
        galleryGrid.appendChild(img);
      }
    }

    function openImageFull(src){
      window.open(src, '_blank');
      hideShareMenu(); // Hide menu if image is opened full
    }

    appGallery.addEventListener('click', ()=>{
      galleryOverlay.style.display = 'flex';
      galleryOverlay.setAttribute('aria-hidden','false');
      loadGallery();
    });
    closeGallery.addEventListener('click', ()=>{
      galleryOverlay.style.display = 'none';
      galleryOverlay.setAttribute('aria-hidden','true');
      hideShareMenu();
    });

    // Hide the share menu when clicking anywhere else on the overlay
    galleryOverlay.addEventListener('click', (e) => {
        if (!shareMenu.contains(e.target) && !e.target.classList.contains('thumb')) {
            hideShareMenu();
        }
    });


    appCCTV.addEventListener('click', ()=>{
      cctvOverlay.style.display = 'flex';
      cctvOverlay.setAttribute('aria-hidden','false');
    });
    closeCCTV.addEventListener('click', ()=>{
      cctvOverlay.style.display = 'none';
      cctvOverlay.setAttribute('aria-hidden','true');
    });

    window.addEventListener('keydown', (e)=>{
      if(document.getElementById('lockScreen').style.display === 'none') return;
      if(e.key >= '0' && e.key <= '9'){
        handleKey(e.key);
      } else if(e.key === 'Backspace'){
        entered = entered.slice(0,-1); refreshDots();
      }
    });

    appGallery.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') appGallery.click(); });
    appCCTV.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') appCCTV.click(); });
  </script>
</body>
</html>
